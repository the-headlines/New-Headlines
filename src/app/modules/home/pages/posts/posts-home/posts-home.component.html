<app-header></app-header>
<div class="container-fluid no-padding">
    <div class="post_content">
        <div class="row no-gutters">
            <div class="col-md-12">
                <div class="profile_container post_box_cont">
                    <div class="">
                        <div class="posts_box">
                            <div class="sub_headline_text">
                                <h3> My posts </h3>
                            </div>
                            <div class="my_posts">
                                <form>
                                    <mat-form-field>
                                        <mat-label>Choose a section</mat-label>
                                        <mat-select [(ngModel)]="selectedValue" name="food"
                                                    (selectionChange)="selectCategory($event)">
                                            <mat-option *ngFor="let food of categories" [value]="food.value">
                                                {{food.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </form>


                                <ng-container class="news-block"
                                >

                                    <table mat-table [dataSource]="filteredPosts" class="mat-elevation-z8 postsTable"
                                           *ngIf="categorySelected && posts && posts.news && posts.news.length!==0">


                                        <!-- Name Column -->
                                        <ng-container matColumnDef="extractedTitle">
                                            <th mat-header-cell *matHeaderCellDef> Name of the post</th>
                                            <td mat-cell *matCellDef="let element">
                                                <a [href]="element.link" target="_blank">{{element.extractedTitle}}</a>
                                                <p>{{element.description|stripTags}}</p>
                                            </td>
                                        </ng-container>

                                        <!-- Image Column -->
                                        <ng-container matColumnDef="extractedImage">
                                            <th mat-header-cell *matHeaderCellDef> Image</th>
                                            <td mat-cell *matCellDef="let element">
                                                <div class="postImage"
                                                     [style.background]="getBackgroundUrl(element.extractedImage)">
                                                </div>
                                            </td>
                                        </ng-container>

                                        <!-- Weight Column -->
                                        <ng-container matColumnDef="createdAt">
                                            <th mat-header-cell *matHeaderCellDef> Date</th>
                                            <td mat-cell
                                                *matCellDef="let element"> {{getPostDate(element.createdAt)}} </td>
                                        </ng-container>

                                        <!-- Weight Column -->
                                        <ng-container matColumnDef="actions">
                                            <th mat-header-cell *matHeaderCellDef> Actions</th>
                                            <td mat-cell *matCellDef="let element">
                                                <button mat-icon-button (click)="editPost(element._id)">
                                                    <mat-icon>edit</mat-icon>
                                                </button>
                                                <button mat-icon-button (click)="removePost(element._id)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </td>
                                        </ng-container>


                                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                    </table>


                                    <!--                                    <div class="user_posts" *ngIf="filteredPosts">-->
                                    <!--                                        <div class="loop_items item posts_items"-->
                                    <!--                                             *ngFor="let single of filteredPosts.news| searchNews: searchTerm">-->
                                    <!--                                            <div class="post_wrapper">-->
                                    <!--                                                <div class="user_posts">-->
                                    <!--                                                    <div class="userName">-->
                                    <!--                                                        <div>-->
                                    <!--                                                            <h3>-->
                                    <!--                                                                <span>Posted by</span>-->
                                    <!--                                                                {{single.creator.name}}</h3>-->
                                    <!--                                                            <p class="updateDate"-->
                                    <!--                                                               [matTooltip]="single.createdAt|formattedDate">{{single.createdAt|formattedDate:false}}</p>-->
                                    <!--                                                        </div>-->
                                    <!--                                                        <app-story-options></app-story-options>-->
                                    <!--                                                    </div>-->
                                    <!--                                                </div>-->
                                    <!--                                                <div class="short_desc">-->
                                    <!--                                                    <a href="{{single.link}}">{{single.link}}</a>-->
                                    <!--                                                    <h6>{{single.description|stripTags}}</h6>-->
                                    <!--                                                </div>-->
                                    <!--                                                <div class="img-block">-->
                                    <!--                                                    <img src="{{single.extractedImage}}" class="img-fluid"-->
                                    <!--                                                         alt=""-->
                                    <!--                                                         (click)="getSingle(single._id)">-->
                                    <!--                                                </div>-->
                                    <!--                                                <div class="text-block">-->
                                    <!--                                                    <a href="{{single.link}}" class="text_block_link"-->
                                    <!--                                                       target="_blank">-->
                                    <!--                                                        <h5 class="news_link">{{single.link|getUrlBase}}</h5>-->
                                    <!--                                                        <h3 class="news_title">{{single.extractedTitle}}</h3>-->
                                    <!--                                                        <p class="news_desc">{{single.extractedDescription}}</p>-->
                                    <!--                                                    </a>-->
                                    <!--                                                </div>-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->

                                    <div *ngIf="posts && posts.news && posts.news.length===0 && categorySelected">
                                        You haven't posted news in this category.
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>
